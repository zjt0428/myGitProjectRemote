--修改结算管理 remark长度
ALTER TABLE T_SETTLE_CONTRACT ALTER COLUMN REMARK VARCHAR(max) NULL;

--增加字段 
ALTER TABLE T_SETTLE_COMPON_BRIEF ADD EQUIP_SERIAL VARCHAR(64) NULL;
ALTER TABLE T_SETTLE_COMPON_BRIEF ADD EQUIP_CATEGORY_NAME VARCHAR(64) NULL;
ALTER TABLE T_SETTLE_COMPON_BRIEF ADD EQUIP_SPECIFIC_NAME VARCHAR(64) NULL;
ALTER TABLE T_SETTLE_COMPON_BRIEF ADD EXW_SERIAL VARCHAR(64) NULL;
ALTER TABLE T_SETTLE_ITEM_BRIEF ADD EQUIP_SERIAL VARCHAR(64) NULL;
ALTER TABLE T_SETTLE_ITEM_BRIEF ADD EQUIP_CATEGORY_NAME VARCHAR(64) NULL;
ALTER TABLE T_SETTLE_ITEM_BRIEF ADD EQUIP_SPECIFIC_NAME VARCHAR(64) NULL;
ALTER TABLE T_SETTLE_ITEM_BRIEF ADD EXW_SERIAL VARCHAR(64) NULL;

--结算主题字段长度加长
ALTER TABLE T_SETTLE_CONTRACT ALTER COLUMN SETTLE_THEME VARCHAR(256)  NOT NULL;

--2019-5-30 09:07:08 数据联动修改记录表  LiuHT
CREATE TABLE T_CHANGE_RECORD(
	ORECORD_ID bigint PRIMARY key   IDENTITY,
	USER_ID bigint,
	USER_NAME VARCHAR(32),
	CREATE_TIME char(19),
	EXECUTE_SQL VARCHAR(1000),
	ORIGINAL_VALUE VARCHAR(1000)
)
--2019-6-5 10:40:58 预收款表   LiuHT
CREATE TABLE T_ADVANCE_RECEIVE(
	ADRECEIVE_ID bigint PRIMARY key IDENTITY,
	CONTRACT_ID bigint,
	USER_ID bigint,
	USER_NAME VARCHAR(64),
	ADVANCE_SERIAL VARCHAR(64),
	ADVANCE_THEME VARCHAR(96),
	DEP_ID bigint,
	PROVIDED_DATE char(10),
	RECEIVE_ENT_ID bigint,
	RECEIVE_MODULE VARCHAR(32),
	RECEIVE_ENT_NAME VARCHAR(64),
	PAYMENT_ID bigint,
	PAYMENT_MODULE VARCHAR(32),
	PAYMENT_NAME VARCHAR(64),
	PAYMENT_TYPE VARCHAR(6),
	PRACTI_ID bigint,
	PRACTI_NAME VARCHAR(64),
	ADVANCE_RECEIVE NUMERIC(12,2),
	ADVANCE_DATE char(10),
	REMARK VARCHAR(256),
	DEL_FLAG char(1),
	APPLYFOR_STATE char(1)
)
ALTER TABLE T_COMPON_INTOSTORE ADD CONTRACT_ID bigint

--2019-6-11 17:33:18 修改字段名 chenzj
exec sp_rename 'T_ADVANCE_RECEIVE.ADVANCE_RECEIVE','ADVANCE_RECEIVE_AMOUNT'

--2019-6-12 09:12:08  预收款【剩余金额】
ALTER TABLE T_ADVANCE_RECEIVE ADD BALANCE NUMERIC(12, 2) 

--2019-6-14 09:25:48 结算管理各页签增加合同ID   chenzj
ALTER TABLE T_SETTLE_EQUIP_BRIEF ADD CONTRACT_ID BIGINT NULL;
ALTER TABLE T_SETTLE_COMPON_BRIEF ADD CONTRACT_ID BIGINT NULL;
ALTER TABLE T_SETTLE_ITEM_BRIEF ADD CONTRACT_ID BIGINT NULL;
ALTER TABLE T_OPERATOR_SALARY_STATEMENT ADD CONTRACT_ID BIGINT NULL;
ALTER TABLE T_SAFETY_MONITOR_SETTLE_STATEMENT ADD CONTRACT_ID BIGINT NULL;
ALTER TABLE T_OTHER_EXPENSE_STATEMENT ADD CONTRACT_ID BIGINT NULL;

--2019-6-14 17:49:23 增加合并结算关联表 chenzj  
CREATE TABLE T_COMBINE_SETTLE_CONTRACT 
(
	COMBINE_ID BIGINT IDENTITY PRIMARY KEY,
	SETTLE_ID BIGINT NOT NULL,
	CONTRACT_ID BIGINT NOT NULL,
	CREATE_TIME SMALLDATETIME DEFAULT GETDATE()
)
--2019-7-3  15:33:34 合同表添加票据单位id和票据单位名字     Zhangjt
ALTER TABLE T_CONTRACT_LEASE ADD BILL_UNIT_ID BIGINT
ALTER TABLE T_CONTRACT_LEASE ADD BILL_UNIT_NAME VARCHAR(64)


ALTER TABLE T_AMOUNT_RECEIVE ALTER COLUMN RELATE_THEME VARCHAR(256) NULL;
ALTER TABLE T_AMOUNT_RECEIVE ALTER COLUMN AMOUNT_THEME VARCHAR(256) NULL;

--2019-6-24 18:46:03  chenzj  巡检计划增加字段
ALTER TABLE T_EQUIPMENT_INSPECT_SCHEMA  ADD GENERATED_CYCLE VARCHAR(1) NULL;			--【生成周期】
ALTER TABLE T_EQUIPMENT_INSPECT_SCHEMA  ADD GENERATED_OPPORTUNITY VARCHAR(1) NULL;		--【生成时间】

--2019-6-25 18:48:10 chenzj 增加巡检计划激活时间
ALTER TABLE T_EQUIPMENT_INSPECT_SCHEMA ADD ACTIVATE_TIME VARCHAR(32) NULL;


--2019-6-27 16:32:03  chenzj 加长合同编号
ALTER TABLE T_CONTRACT_LEASE ALTER COLUMN CONSTRACT_NO VARCHAR(512) NULL;
ALTER TABLE T_DISPATCH ALTER COLUMN RELATE_SERIAL VARCHAR(512) NULL;
ALTER TABLE T_EQUIPMENT_ACTIVATE ALTER COLUMN CONTRACT_NO VARCHAR(512) NULL;
ALTER TABLE T_EQUIPMENT_INSTALL ALTER COLUMN CONTRACT_SERIAL VARCHAR(512) NULL;
ALTER TABLE T_SETTLE_CONTRACT ALTER COLUMN CONTRACT_NO VARCHAR(512) NULL;


--2019-7-2 13:58:12 chenzj 巡检管理增加封存字段
ALTER TABLE T_EQUIPMENT_INSPECT ADD SEAL_STATUS VARCHAR(1) NULL;

--2019-7-3 17:59:40 chenzj 设备规格表码  增加设备名称
ALTER TABLE BM_EQUIP_SPECIFIC ADD EQUIP_TYPE VARCHAR(64);  --设备名称
update INIT_LOAD_TABLE set ALIAS_FIELD_NAME1 = 'EQUIP_TYPE',ALIAS_FIELD_LABLE1= '设备名称' where TABLE_ALIAS = 'equipSpecific'；

--2019-7-6 17:14:19 chenzj 结算管理 
ALTER TABLE T_SETTLE_CONTRACT ADD CLOSED_STATUS VARCHAR(1) NOT NULL DEFAULT '0';   -- 关账状态

--2019-7-9 15:17:54 chenzj 预收款增加结算ID
ALTER TABLE T_ADVANCE_RECEIVE ADD SETTLE_ID BIGINT NULL;
--2019-7-11  19:00 创建设备保险理赔记录表 Zhangjt
CREATE TABLE T_EQUIP_INSURANCE_CLAIM_RECORD
(
    CLAIM_ID BIGINT IDENTITY PRIMARY KEY,
    INSURE_ID BIGINT,
    INSURE_CLAIM_SERIAL VARCHAR(128),
    BANK_DEPOSIT VARCHAR(128),
    DEPOSIT_ACCOUNT VARCHAR(128),
    CLAIM_DATE VARCHAR(10),
    COST_AMOUNT DECIMAL(12),
    CLAIM_AMOUNT DECIMAL(12),
    CLAIM_REASON VARCHAR(255),
    CONTRACT_ID BIGINT,
    PROJECT_NAME VARCHAR(256),
    REMARK VARCHAR(256)
)
--2019-7-11 08:36:03 添加保险表、保险详情表 ；设备表添加参保状态、参保停保日期的字段    LiuHT
CREATE TABLE T_EQUIP_INSURANCE(
INSURE_ID bigint PRIMARY key IDENTITY,
INSURE_SERIAL varchar(64),
START_INSURE_DATE char(10),
END_INSURE_DATE char(10),
APPLYFOR_STATE varchar(1),
STATUS VARCHAR(1),
TOTAL_PREMIUM  Decimal(12,2),
INSURANCE_COMPANY varchar(128),
CLAIM_PHONE varchar(64),
LINKMAN varchar(64),
EQUIP_NUM INT,
REMARK varchar(128),
DEL_FLAG char(1)
)

CREATE TABLE T_EQUIP_INSURANCE_DETAIL(
DETAIL_ID bigint PRIMARY key IDENTITY,
INSURE_ID bigint ,
EQUIP_ID bigint ,
EQUIP_WORTH varchar(24),
INSURANCE_CATEGORY varchar(64),
PREMIUM Decimal(12,2),
CONTRACT_ID bigint ,
CONTRACT_NO varchar(64),
PROJECT_NAME varchar(64),
ADDRESS varchar(16),
REMARK varchar(128)
)
ALTER TABLE T_EQUIPMENT ADD INSURE_STATUS VARCHAR(2);
ALTER TABLE T_EQUIPMENT ADD INSURE_TIME CHAR(10);

--2019-7-17 15:15:32  保险管理表添加填报人ID、填报人姓名、填报日期字段   LiuHT
ALTER TABLE T_EQUIP_INSURANCE ADD USER_ID bigint;
ALTER TABLE T_EQUIP_INSURANCE ADD USER_NAME VARCHAR(64);
ALTER TABLE T_EQUIP_INSURANCE ADD DEP_ID bigint;
ALTER TABLE T_EQUIP_INSURANCE ADD PROVIDED_DATE CHAR(10);
ALTER TABLE T_SUPPLIER ADD LINK_MAN VARCHAR(64);
--2019-7-19 15:57:32 保险设备详情表添加起保日期字段  LiuHT
ALTER TABLE T_EQUIP_INSURANCE_DETAIL ADD START_INSURE_DATE CHAR(10);
ALTER TABLE T_EQUIP_INSURANCE_DETAIL ADD DEFAULT_FLAG VARCHAR(5);

--2019-7-22 16:35:24 合同表适用税率数据类型更改 ，APP_REPAIR表中添加维修前、维修后、配件更换前、配件更换后的字段 LiuHT  
ALTER TABLE T_CONTRACT_LEASE alter column APPLICABLE_TAX_RATE VARCHAR(24);
ALTER TABLE T_APP_REPAIR ADD REPLACE_COMPON VARCHAR(200);
ALTER TABLE T_APP_REPAIR ADD REPAIR_BEFORE_IMAGE VARCHAR(200);
ALTER TABLE T_APP_REPAIR ADD REPAIR_AFTER_IMAGE VARCHAR(200);
ALTER TABLE T_APP_REPAIR ADD COMPON_BEFORE_IMAGE VARCHAR(200);
ALTER TABLE T_APP_REPAIR ADD COMPON_AFTER_IMAGE VARCHAR(200);

--2019-7-19 17:14:00 安全监控增加安装费字段   chenzj
ALTER TABLE T_SAFETY_MONITOR_SETTLE_STATEMENT ADD INSTALL_FEE DECIMAL(12,2) NULL;

--2019-7-25 17:14:00 安全监控增加安装费字段  Zhangjt
ALTER TABLE T_INVOICE_ISSUE ADD INVOICE_CONTENT VARCHAR(128);
ALTER TABLE T_INVOICE_ISSUE ADD INVOICE_STATUSE VARCHAR(128) ;

--2019-7-26 17:14:00 给安装交底表添加,交底照片，交底地址字段 给设备安装表添加整机,当前安装高度,安装地址,交底id字段  Zhangjt
ALTER TABLE T_TECHNICAL_DISCLOSURE ADD DISCLOSURE_PHOTO VARCHAR(256);
ALTER TABLE T_TECHNICAL_DISCLOSURE ADD DISCLOSURE_LOCATION VARCHAR(256) ;
ALTER TABLE T_EQUIPMENT_INSTALL ADD EQUIP_AMOUNT int(64);
ALTER TABLE T_EQUIPMENT_INSTALL ADD CURRENT_INSTALL_HEIGHT VARCHAR(256) ;
ALTER TABLE T_EQUIPMENT_INSTALL ADD INSTALL_LOCATION VARCHAR(256) ;
ALTER TABLE T_EQUIPMENT_INSTALL ADD DISCLOSURE_ID bigint ;

--2019-7-27 17:14:00 创建设备安拆验收表段  Zhangjt
CREATE TABLE T_INSTALL_REVIEW(
	REVIEW_ID bigint PRIMARY key IDENTITY,
	REVIW_CHECK_ATTACH VARCHAR(200),
	REVIEW_CONCLUSION VARCHAR(256),
	INSTALL_ID BIGINT NOT NULL,
	REVIE_STATUS VARCHAR(20),
	REJECT_REASON VARCHAR(200)
)
ALTER TABLE T_APP_REPAIR ADD RECORD_ID VARCHAR(24);
ALTER TABLE T_APP_REPAIR ADD PROC_MAN_ID VARCHAR(256);
CREATE TABLE T_CONTRACT_INOUT_FREE(
	INOUT_ID bigint PRIMARY key IDENTITY,
	CONTRACT_ID bigint,
	EQUIP_SPECIFIC_NAME VARCHAR(64),
	EQUIP_GENERIC_NAME VARCHAR(64),
	RENT NUMERIC(12,2),
	RENT_UNIT VARCHAR(6)
)
CREATE TABLE T_CONTRACT_OPERATOR_FREE(
	OPERATOR_ID bigint PRIMARY key IDENTITY,
	CONTRACT_ID bigint,
	EQUIP_SPECIFIC_NAME VARCHAR(64),
	EQUIP_GENERIC_NAME VARCHAR(64),
	RENT NUMERIC(12,2),
	RENT_UNIT VARCHAR(6)
)
ALTER TABLE T_APP_REPAIR alter column REPAIR_DT varchar(19);
ALTER TABLE T_APP_REPAIR alter column REPORT_DT varchar(19);
ALTER TABLE T_SAFETY_MONITOR_SETTLE_LIST ADD	EQUIP_GENERIC_NAME VARCHAR(64);
--2019-7-26 17:09:49  设备安装表添加小程序状态字段    LiuHT
ALTER  TABLE T_EQUIPMENT_INSTALL ADD APP_INSTALL_STATE CHAR(1);
ALTER  TABLE T_EQUIPMENT_INSTALL ADD APP_INSTALL_STATE CHAR(1);
--2019-7-27 10:25:44  小程序设备安装整改记录表   LiuHT
CREATE TABLE T_RECTIFICATION_RECORD(
	RECTIFICA_ID bigint PRIMARY key IDENTITY,
	REVIEW_ID bigint,
	RECTIFICA_IMAGE VARCHAR(256),
	RECTIFICA_DATE VARCHAR(19),
	RECTIFICA_DETAIL VARCHAR(256)
)
--2019-7-29 10:10:01 现场拆卸表添加小程序拆卸状态字段   LiuHT
ALTER TABLE T_EQUIPMENT_DISMANTLE ADD APP_DISMANTLE_STATE CHAR(1);
ALTER TABLE T_EQUIPMENT_DISMANTLE ADD DISCLOSURE_ID bigint;
ALTER TABLE T_SAFETY_MONITOR_SETTLE_LIST ADD	EQUIP_GENERIC_NAME VARCHAR(64);
--2019-07-26 xnz 客户档案添加字段
ALTER TABLE T_CUSTOMER ADD PARENT_ID BIGINT NULL;
--2019-7-31 17:14:00 给安装交底表添加调度设备ID字段,修改技术交底交底日期的长度  Zhangjt
ALTER TABLE T_TECHNICAL_DISCLOSURE ADD DISPATCH_EQUIP_ID bigint;
Alter TABLE T_TECHNICAL_DISCLOSURE ADD DISCLOSURE_DATE VARCHAR(19);

--2019-8-4 17:14:00 给安装交底表添加合同ID,交底人ID,交底接收人ID,项目ID字段  Zhangjt
ALTER TABLE T_TECHNICAL_DISCLOSURE ADD CONTRACT_ID bigint;
ALTER TABLE T_TECHNICAL_DISCLOSURE ADD DISCLOSURE_MAN_ID bigint;
ALTER TABLE T_TECHNICAL_DISCLOSURE ADD ACCEPTANCE_MAN_ID bigint;
ALTER TABLE T_TECHNICAL_DISCLOSURE ADD PROJECT_ID bigint;
ALTER TABLE T_TECHNICAL_DISCLOSURE ADD ACCEPTANCE_MAN_ID VARCHAR(128);
ALTER TABLE T_TECHNICAL_DISCLOSURE ADD DISCLOSURE_MAN_ID VARCHAR(128);






