--修改结算管理 remark长度
ALTER TABLE T_SETTLE_CONTRACT ALTER COLUMN REMARK VARCHAR(max) NULL;

--增加字段 
ALTER TABLE T_SETTLE_COMPON_BRIEF ADD EQUIP_SERIAL VARCHAR(64) NULL;
ALTER TABLE T_SETTLE_COMPON_BRIEF ADD EQUIP_CATEGORY_NAME VARCHAR(64) NULL;
ALTER TABLE T_SETTLE_COMPON_BRIEF ADD EQUIP_SPECIFIC_NAME VARCHAR(64) NULL;
ALTER TABLE T_SETTLE_COMPON_BRIEF ADD EXW_SERIAL VARCHAR(64) NULL;
ALTER TABLE T_SETTLE_ITEM_BRIEF ADD EQUIP_SERIAL VARCHAR(64) NULL;
ALTER TABLE T_SETTLE_ITEM_BRIEF ADD EQUIP_CATEGORY_NAME VARCHAR(64) NULL;
ALTER TABLE T_SETTLE_ITEM_BRIEF ADD EQUIP_SPECIFIC_NAME VARCHAR(64) NULL;
ALTER TABLE T_SETTLE_ITEM_BRIEF ADD EXW_SERIAL VARCHAR(64) NULL;

--结算主题字段长度加长
ALTER TABLE T_SETTLE_CONTRACT ALTER COLUMN SETTLE_THEME VARCHAR(256)  NOT NULL;

--2019-5-30 09:07:08 数据联动修改记录表  LiuHT
CREATE TABLE T_CHANGE_RECORD(
	ORECORD_ID bigint PRIMARY key   IDENTITY,
	USER_ID bigint,
	USER_NAME VARCHAR(32),
	CREATE_TIME char(19),
	EXECUTE_SQL VARCHAR(1000),
	ORIGINAL_VALUE VARCHAR(1000)
)
--2019-6-5 10:40:58 预收款表   LiuHT
CREATE TABLE T_ADVANCE_RECEIVE(
	ADRECEIVE_ID bigint PRIMARY key IDENTITY,
	CONTRACT_ID bigint,
	USER_ID bigint,
	USER_NAME VARCHAR(64),
	ADVANCE_SERIAL VARCHAR(64),
	ADVANCE_THEME VARCHAR(96),
	DEP_ID bigint,
	PROVIDED_DATE char(10),
	RECEIVE_ENT_ID bigint,
	RECEIVE_MODULE VARCHAR(32),
	RECEIVE_ENT_NAME VARCHAR(64),
	PAYMENT_ID bigint,
	PAYMENT_MODULE VARCHAR(32),
	PAYMENT_NAME VARCHAR(64),
	PAYMENT_TYPE VARCHAR(6),
	PRACTI_ID bigint,
	PRACTI_NAME VARCHAR(64),
	ADVANCE_RECEIVE NUMERIC(12,2),
	ADVANCE_DATE char(10),
	REMARK VARCHAR(256),
	DEL_FLAG char(1),
	APPLYFOR_STATE char(1)
)
ALTER TABLE T_COMPON_INTOSTORE ADD CONTRACT_ID bigint

--2019-6-11 17:33:18 修改字段名 chenzj
exec sp_rename 'T_ADVANCE_RECEIVE.ADVANCE_RECEIVE','ADVANCE_RECEIVE_AMOUNT'

--2019-6-12 09:12:08  预收款【剩余金额】
ALTER TABLE T_ADVANCE_RECEIVE ADD BALANCE NUMERIC(12, 2) 

--2019-6-14 09:25:48 结算管理各页签增加合同ID   chenzj
ALTER TABLE T_SETTLE_EQUIP_BRIEF ADD CONTRACT_ID BIGINT NULL;
ALTER TABLE T_SETTLE_COMPON_BRIEF ADD CONTRACT_ID BIGINT NULL;
ALTER TABLE T_SETTLE_ITEM_BRIEF ADD CONTRACT_ID BIGINT NULL;
ALTER TABLE T_OPERATOR_SALARY_STATEMENT ADD CONTRACT_ID BIGINT NULL;
ALTER TABLE T_SAFETY_MONITOR_SETTLE_STATEMENT ADD CONTRACT_ID BIGINT NULL;
ALTER TABLE T_OTHER_EXPENSE_STATEMENT ADD CONTRACT_ID BIGINT NULL;

--2019-6-14 17:49:23 增加合并结算关联表 chenzj  
CREATE TABLE T_COMBINE_SETTLE_CONTRACT 
(
	COMBINE_ID BIGINT IDENTITY PRIMARY KEY,
	SETTLE_ID BIGINT NOT NULL,
	CONTRACT_ID BIGINT NOT NULL,
	CREATE_TIME SMALLDATETIME DEFAULT GETDATE()
)
--2019-7-3  15:33:34 合同表添加票据单位id和票据单位名字     Zhangjt
ALTER TABLE T_CONTRACT_LEASE ADD BILL_UNIT_ID BIGINT
ALTER TABLE T_CONTRACT_LEASE ADD BILL_UNIT_NAME VARCHAR(64)


ALTER TABLE T_AMOUNT_RECEIVE ALTER COLUMN RELATE_THEME VARCHAR(256) NULL;
ALTER TABLE T_AMOUNT_RECEIVE ALTER COLUMN AMOUNT_THEME VARCHAR(256) NULL;

--2019-6-24 18:46:03  chenzj  巡检计划增加字段
ALTER TABLE T_EQUIPMENT_INSPECT_SCHEMA  ADD GENERATED_CYCLE VARCHAR(1) NULL;			--【生成周期】
ALTER TABLE T_EQUIPMENT_INSPECT_SCHEMA  ADD GENERATED_OPPORTUNITY VARCHAR(1) NULL;		--【生成时间】

--2019-6-25 18:48:10 chenzj 增加巡检计划激活时间
ALTER TABLE T_EQUIPMENT_INSPECT_SCHEMA ADD ACTIVATE_TIME VARCHAR(32) NULL;


--2019-6-27 16:32:03  chenzj 加长合同编号
ALTER TABLE T_CONTRACT_LEASE ALTER COLUMN CONSTRACT_NO VARCHAR(512) NULL;
ALTER TABLE T_DISPATCH ALTER COLUMN RELATE_SERIAL VARCHAR(512) NULL;
ALTER TABLE T_EQUIPMENT_ACTIVATE ALTER COLUMN CONTRACT_NO VARCHAR(512) NULL;
ALTER TABLE T_EQUIPMENT_INSTALL ALTER COLUMN CONTRACT_SERIAL VARCHAR(512) NULL;
ALTER TABLE T_SETTLE_CONTRACT ALTER COLUMN CONTRACT_NO VARCHAR(512) NULL;


--2019-7-2 13:58:12 chenzj 巡检管理增加封存字段
ALTER TABLE T_EQUIPMENT_INSPECT ADD SEAL_STATUS VARCHAR(1) NULL;

--2019-7-3 17:59:40 chenzj 设备规格表码  增加设备名称
ALTER TABLE BM_EQUIP_SPECIFIC ADD EQUIP_TYPE VARCHAR(64);  --设备名称
update INIT_LOAD_TABLE set ALIAS_FIELD_NAME1 = 'EQUIP_TYPE',ALIAS_FIELD_LABLE1= '设备名称' where TABLE_ALIAS = 'equipSpecific'；

--2019-7-6 17:14:19 chenzj 结算管理 
ALTER TABLE T_SETTLE_CONTRACT ADD CLOSED_STATUS VARCHAR(1) NOT NULL DEFAULT '0';   -- 关账状态

--2019-7-9 15:17:54 chenzj 预收款增加结算ID
ALTER TABLE T_ADVANCE_RECEIVE ADD SETTLE_ID BIGINT NULL;
--2019-7-11  19:00 创建设备保险理赔记录表 Zhangjt
CREATE TABLE T_EQUIP_INSURANCE_CLAIM_RECORD
(
    CLAIM_ID BIGINT IDENTITY PRIMARY KEY,
    INSURE_ID BIGINT,
    INSURE_CLAIM_SERIAL VARCHAR(128),
    BANK_DEPOSIT VARCHAR(128),
    DEPOSIT_ACCOUNT VARCHAR(128),
    CLAIM_DATE VARCHAR(10),
    COST_AMOUNT DECIMAL(12),
    CLAIM_AMOUNT DECIMAL(12),
    CLAIM_REASON VARCHAR(255),
    CONTRACT_ID BIGINT,
    PROJECT_NAME VARCHAR(256),
    REMARK VARCHAR(256)
)
--2019-7-11 08:36:03 添加保险表、保险详情表 ；设备表添加参保状态、参保停保日期的字段    LiuHT
CREATE TABLE T_EQUIP_INSURANCE(
INSURE_ID bigint PRIMARY key IDENTITY,
INSURE_SERIAL varchar(64),
START_INSURE_DATE char(10),
END_INSURE_DATE char(10),
APPLYFOR_STATE varchar(1),
STATUS VARCHAR(1),
TOTAL_PREMIUM  Decimal(12,2),
INSURANCE_COMPANY varchar(128),
CLAIM_PHONE varchar(64),
LINKMAN varchar(64),
EQUIP_NUM INT,
REMARK varchar(128),
DEL_FLAG char(1)
)

CREATE TABLE T_EQUIP_INSURANCE_DETAIL(
DETAIL_ID bigint PRIMARY key IDENTITY,
INSURE_ID bigint ,
EQUIP_ID bigint ,
EQUIP_WORTH varchar(24),
INSURANCE_CATEGORY varchar(64),
PREMIUM Decimal(12,2),
CONTRACT_ID bigint ,
CONTRACT_NO varchar(64),
PROJECT_NAME varchar(64),
ADDRESS varchar(16),
REMARK varchar(128)
)
ALTER TABLE T_EQUIPMENT ADD INSURE_STATUS VARCHAR(2);
ALTER TABLE T_EQUIPMENT ADD INSURE_TIME CHAR(10);

--2019-7-17 15:15:32  保险管理表添加填报人ID、填报人姓名、填报日期字段   LiuHT
ALTER TABLE T_EQUIP_INSURANCE ADD USER_ID bigint;
ALTER TABLE T_EQUIP_INSURANCE ADD USER_NAME VARCHAR(64);
ALTER TABLE T_EQUIP_INSURANCE ADD DEP_ID bigint;
ALTER TABLE T_EQUIP_INSURANCE ADD PROVIDED_DATE CHAR(10);
ALTER TABLE T_SUPPLIER ADD LINK_MAN VARCHAR(64);
ALTER TABLE T_SUPPLIER ADD LINK_MAN_PHONE VARCHAR(64);
ALTER TABLE T_EQUIP_INSURANCE ADD LINKMAN_PHONE VARCHAR(64);
ALTER TABLE T_EQUIP_INSURANCE ADD EFFECTIVE VARCHAR(1);

ALTER TABLE [dbo].[T_EQUIPMENT] ALTER COLUMN [INSURE_STATUS] varchar(2)  NULL;
ALTER TABLE [dbo].[T_EQUIP_INSURANCE_DETAIL] ALTER COLUMN [ADDRESS] varchar(512)  NULL
ALTER TABLE [dbo].[T_EQUIP_INSURANCE_DETAIL] ALTER COLUMN [PROJECT_NAME] varchar(256)  NULL

--2019-7-19 17:14:00 安全监控增加安装费字段   chenzj
ALTER TABLE T_SAFETY_MONITOR_SETTLE_STATEMENT ADD INSTALL_FEE DECIMAL(12,2) NULL;